@using Event.Data.Objects.Entities
@using MyEventPlan.Data.Service.Enum
@model IEnumerable<Task>
@{
    ViewBag.Title = "List";
    ViewBag.TableHeader = "List of all my task";
    Layout = "../Shared/_LayoutTask.cshtml";
    var task = new Task();
}
@section add {
    <!-- Button trigger modal -->
    <button type="button" class="btn btn-primary btn-xs icon-plus pull-right" data-toggle="modal" data-target="#myModal">
        Add Task
    </button>

    <!-- Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title" id="myModalLabel">Add a Task</h4>
                </div>
                <div class="modal-body">
                    @{
                        Html.RenderPartial("CreateTaskModal", task);
                    }
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
    </div>
}
<div class="table-responsive">
    <table class="table table-message">
        <tr class="heading">
            <td class="cell-icon"></td>
            <td class="cell-title">Task</td>
            <td class="cell-status hidden-phone hidden-tablet">Status</td>
            <td class="cell-time align-right">Due Date</td>
        </tr>

        @foreach (var item in Model)
        {
            if (item.Status == TaskStausEnum.Missed.ToString())
            {
                <tr class="task">
                    <td class="cell-icon">
                        <i class="icon-checker high"></i>
                    </td>
                    <td class="cell-title">
                        <div>@item.Description</div>
                    </td>
                    <td class="cell-status hidden-phone hidden-tablet">
                        <b class="due">Missed</b>
                    </td>
                    <td class="cell-time align-right">@item.DueDate.ToShortDateString()</td>
                </tr>
            }
            if (item.Status == TaskStausEnum.InProgress.ToString())
            {
                <tr class="task">
                    <td class="cell-icon">
                        <i class="icon-checker high"></i>
                    </td>
                    <td class="cell-title">
                        <div>@item.Description</div>
                    </td>
                    <td class="cell-status hidden-phone hidden-tablet">@item.Status</td>
                    <td class="cell-time align-right">@item.DueDate.ToShortDateString()</td>
                </tr>
            }
            if (item.Status == TaskStausEnum.Completed.ToString())
            {
                <tr class="task resolved">
                    <td class="cell-icon">
                        <i class="icon-checker high"></i>
                    </td>
                    <td class="cell-title">
                        <div>@item.Description</div>
                    </td>
                    <td class="cell-status hidden-phone hidden-tablet">@item.Status</td>
                    <td class="cell-time align-right">@item.DueDate.ToShortDateString()</td>
                </tr>
            }
        }

    </table>
</div>